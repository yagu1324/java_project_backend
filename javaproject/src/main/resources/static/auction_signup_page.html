<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>íšŒì›ê°€ì… - ëª¨ì˜ ê²½ë§¤ ì‚¬ì´íŠ¸</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <style>
    body {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }

    .signup-container {
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      overflow: hidden;
      max-width: 1000px;
      width: 100%;
      display: flex;
      min-height: 700px;
    }

    .signup-left {
      flex: 1;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      padding: 60px 40px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      position: relative;
      overflow: hidden;
    }

    .signup-left::before {
      content: '';
      position: absolute;
      width: 300px;
      height: 300px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      top: -100px;
      right: -100px;
    }

    .signup-left::after {
      content: '';
      position: absolute;
      width: 200px;
      height: 200px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
      bottom: -50px;
      left: -50px;
    }

    .signup-left-content {
      position: relative;
      z-index: 1;
      text-align: center;
    }

    .logo {
      font-size: 4rem;
      margin-bottom: 20px;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {

      0%,
      100% {
        transform: translateY(0);
      }

      50% {
        transform: translateY(-20px);
      }
    }

    .signup-left h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 15px;
    }

    .signup-left p {
      font-size: 1.1rem;
      opacity: 0.9;
      line-height: 1.6;
    }

    .signup-features {
      margin-top: 40px;
      text-align: left;
    }

    .feature-item {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      font-size: 1rem;
    }

    .feature-item i {
      font-size: 1.5rem;
      margin-right: 15px;
      background: rgba(255, 255, 255, 0.2);
      padding: 10px;
      border-radius: 10px;
    }

    .signup-right {
      flex: 1;
      padding: 60px 50px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .signup-header {
      margin-bottom: 40px;
    }

    .signup-header h2 {
      font-size: 2rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 10px;
    }

    .signup-header p {
      color: #666;
      font-size: 1rem;
    }

    .form-group {
      margin-bottom: 25px;
    }

    .form-label {
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
      display: block;
      font-size: 0.95rem;
    }

    .form-control {
      padding: 12px 15px;
      border: 2px solid #e0e0e0;
      border-radius: 10px;
      font-size: 0.95rem;
      transition: all 0.3s;
    }

    .form-control:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.15);
    }

    .input-icon {
      position: relative;
    }

    .input-icon i {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      color: #999;
    }

    .input-icon .form-control {
      padding-left: 45px;
    }

    .password-toggle {
      position: absolute;
      right: 15px;
      left: auto !important;
      /* â­ [ìˆ˜ì •] ì™¼ìª½ ìœ„ì¹˜ ì´ˆê¸°í™” */
      top: 50%;
      transform: translateY(-50%);
      cursor: pointer;
      color: #999;
      transition: color 0.3s;
      z-index: 10;
      /* â­ [ìˆ˜ì •] í´ë¦­ ê°€ëŠ¥í•˜ë„ë¡ z-index ì¶”ê°€ */
    }

    .password-toggle:hover {
      color: #667eea;
    }

    .form-check {
      display: flex;
      align-items: flex-start;
      margin-bottom: 25px;
    }

    .form-check-input {
      width: 20px;
      height: 20px;
      margin-right: 10px;
      margin-top: 2px;
      cursor: pointer;
      flex-shrink: 0;
    }

    .form-check-input:checked {
      background-color: #667eea;
      border-color: #667eea;
    }

    .form-check-label {
      color: #666;
      cursor: pointer;
      margin-bottom: 0;
      font-size: 0.9rem;
      line-height: 1.5;
    }

    .form-check-label a {
      color: #667eea;
      text-decoration: none;
    }

    .form-check-label a:hover {
      text-decoration: underline;
    }

    .btn-signup {
      width: 100%;
      padding: 15px;
      border-radius: 10px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border: none;
      color: white;
      font-weight: 700;
      font-size: 1.1rem;
      transition: all 0.3s;
      margin-bottom: 20px;
    }

    .btn-signup:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
    }

    .login-link {
      text-align: center;
      color: #666;
    }

    .login-link a {
      color: #667eea;
      text-decoration: none;
      font-weight: 600;
    }

    .login-link a:hover {
      text-decoration: underline;
    }

    .password-strength {
      height: 5px;
      border-radius: 5px;
      margin-top: 8px;
      background: #e0e0e0;
      overflow: hidden;
    }

    .password-strength-bar {
      height: 100%;
      width: 0;
      transition: all 0.3s;
    }

    .strength-weak {
      background: #ff6b6b;
      width: 33%;
    }

    .strength-medium {
      background: #ffa500;
      width: 66%;
    }

    .strength-strong {
      background: #51cf66;
      width: 100%;
    }

    .password-hint {
      font-size: 0.85rem;
      color: #999;
      margin-top: 5px;
    }

    @media (max-width: 768px) {
      .signup-container {
        flex-direction: column;
      }

      .signup-left {
        padding: 40px 30px;
        min-height: 250px;
      }

      .signup-features {
        display: none;
      }

      .signup-left h1 {
        font-size: 2rem;
      }

      .signup-right {
        padding: 40px 30px;
      }
    }
  </style>
</head>

<body>
  <div class="signup-container">
    <!-- ì™¼ìª½ ì˜ì—­ -->
    <div class="signup-left">
      <div class="signup-left-content">
        <div class="logo">
          <i class="bi bi-hammer"></i>
        </div>
        <h1>ëª¨ì˜ ê²½ë§¤</h1>
        <p>
          ì§€ê¸ˆ ê°€ì…í•˜ê³ <br>
          íŠ¹ë³„í•œ ê²½ë§¤ë¥¼ ê²½í—˜í•˜ì„¸ìš”!
        </p>

        <div class="signup-features">
          <div class="feature-item">
            <i class="bi bi-check-circle-fill"></i>
            <span>ë¬´ë£Œ íšŒì›ê°€ì…</span>
          </div>
          <div class="feature-item">
            <i class="bi bi-shield-check"></i>
            <span>ì•ˆì „í•œ ê±°ë˜ ë³´ì¥</span>
          </div>
          <div class="feature-item">
            <i class="bi bi-lightning-charge-fill"></i>
            <span>ì‹¤ì‹œê°„ ê²½ë§¤ ì°¸ì—¬</span>
          </div>
        </div>
      </div>
    </div>

    <!-- ì˜¤ë¥¸ìª½ íšŒì›ê°€ì… í¼ -->
    <div class="signup-right">
      <div class="signup-header">
        <h2>íšŒì›ê°€ì… ğŸš€</h2>
        <p>ëª‡ ê°€ì§€ ì •ë³´ë§Œ ì…ë ¥í•˜ë©´ ë°”ë¡œ ì‹œì‘í•  ìˆ˜ ìˆì–´ìš”</p>
      </div>

      <form id="signupForm">
        <!-- ì•„ì´ë”” -->
        <div class="form-group">
          <label class="form-label">ì•„ì´ë””</label>
          <div class="input-icon">
            <i class="bi bi-person-circle"></i>
            <input type="text" class="form-control" id="username" placeholder="ì•„ì´ë””" required>
          </div>
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ -->
        <div class="form-group">
          <label class="form-label">ë¹„ë°€ë²ˆí˜¸</label>
          <div class="input-icon">
            <i class="bi bi-lock"></i>
            <input type="password" class="form-control" id="password" placeholder="ë¹„ë°€ë²ˆí˜¸ (8ì ì´ìƒ)" required>
            <i class="bi bi-eye password-toggle" id="togglePassword"></i>
          </div>
          <div class="password-strength">
            <div class="password-strength-bar" id="strengthBar"></div>
          </div>
          <div class="password-hint" id="passwordHint">ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì í¬í•¨ 8ì ì´ìƒ</div>
        </div>

        <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
        <div class="form-group">
          <label class="form-label">ë¹„ë°€ë²ˆí˜¸ í™•ì¸</label>
          <div class="input-icon">
            <i class="bi bi-lock-fill"></i>
            <input type="password" class="form-control" id="passwordConfirm" placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸" required>
            <i class="bi bi-eye password-toggle" id="togglePasswordConfirm"></i>
          </div>
        </div>

        <!-- ì´ë©”ì¼ -->
        <div class="form-group">
          <label class="form-label">ì´ë©”ì¼</label>
          <div class="input-icon">
            <i class="bi bi-envelope"></i>
            <input type="email" class="form-control" id="email" placeholder="example@email.com" required>
          </div>
        </div>

        <!-- ìƒë…„ì›”ì¼ -->
        <div class="form-group">
          <label class="form-label">ìƒë…„ì›”ì¼</label>
          <div class="input-icon">
            <i class="bi bi-calendar"></i>
            <input type="date" class="form-control" id="birthdate" required>
          </div>
        </div>

        <!-- â­ [ì¶”ê°€] ì „í™”ë²ˆí˜¸ -->
        <div class="form-group">
          <label class="form-label">ì „í™”ë²ˆí˜¸</label>
          <div class="input-icon">
            <i class="bi bi-telephone"></i>
            <input type="tel" class="form-control" id="phone" placeholder="010-0000-0000" required>
          </div>
        </div>

        <!-- ì•½ê´€ ë™ì˜ -->
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="agreeTerms" required>
          <label class="form-check-label" for="agreeTerms">
            <a href="#">ì´ìš©ì•½ê´€</a> ë° <a href="#">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a>ì— ë™ì˜í•©ë‹ˆë‹¤.
          </label>
        </div>

        <!-- ê°€ì… ë²„íŠ¼ -->
        <button type="submit" class="btn-signup">ê°€ì…í•˜ê¸°</button>

        <div class="login-link">
          ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”? <a href="login.html">ë¡œê·¸ì¸</a>
        </div>
      </form>
    </div>
  </div>

  <script>
    // ë¹„ë°€ë²ˆí˜¸ ë³´ê¸°/ìˆ¨ê¸°ê¸° í† ê¸€ ê¸°ëŠ¥
    const togglePassword = document.querySelector('#togglePassword');
    const password = document.querySelector('#password');

    togglePassword.addEventListener('click', function (e) {
      const type = password.getAttribute('type') === 'password' ? 'text' : 'password';
      password.setAttribute('type', type);
      this.classList.toggle('bi-eye');
      this.classList.toggle('bi-eye-slash');
    });

    const togglePasswordConfirm = document.querySelector('#togglePasswordConfirm');
    const passwordConfirm = document.querySelector('#passwordConfirm');

    togglePasswordConfirm.addEventListener('click', function (e) {
      const type = passwordConfirm.getAttribute('type') === 'password' ? 'text' : 'password';
      passwordConfirm.setAttribute('type', type);
      this.classList.toggle('bi-eye');
      this.classList.toggle('bi-eye-slash');
    });

    // ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ì²´í¬
    const strengthBar = document.getElementById('strengthBar');
    const passwordHint = document.getElementById('passwordHint');

    password.addEventListener('input', function () {
      const val = password.value;
      let strength = 0;

      if (val.length >= 8) strength += 1;
      if (val.match(/[a-z]+/)) strength += 1;
      if (val.match(/[0-9]+/)) strength += 1;
      if (val.match(/[$@#&!]+/)) strength += 1;

      strengthBar.className = 'password-strength-bar';
      if (val.length < 8) {
        strengthBar.style.width = '0%';
        passwordHint.textContent = 'ì˜ë¬¸, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì í¬í•¨ 8ì ì´ìƒ';
      } else if (strength < 3) {
        strengthBar.classList.add('strength-weak');
        passwordHint.textContent = 'ì•½í•¨';
      } else if (strength < 4) {
        strengthBar.classList.add('strength-medium');
        passwordHint.textContent = 'ë³´í†µ';
      } else {
        strengthBar.classList.add('strength-strong');
        passwordHint.textContent = 'ê°•í•¨';
      }
    });

    // íšŒì›ê°€ì… í¼ ì œì¶œ ì²˜ë¦¬
    document.getElementById('signupForm').addEventListener('submit', async function (event) {
      event.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë™ì‘ ë§‰ê¸°

      // 1. í¼ ë°ì´í„° ìˆ˜ì§‘
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      const passwordConfirm = document.getElementById('passwordConfirm').value;
      const email = document.getElementById('email').value;
      const birthdate = document.getElementById('birthdate').value;
      const phone = document.getElementById('phone').value; // â­ [ì¶”ê°€] ì „í™”ë²ˆí˜¸ ê°’ ê°€ì ¸ì˜¤ê¸°
      const agreeTerms = document.getElementById('agreeTerms').checked;

      // 2. 1ì°¨ ìœ íš¨ì„± ê²€ì‚¬ (í”„ë¡ íŠ¸ì—”ë“œ)
      if (!agreeTerms) {
        alert('ì´ìš©ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.');
        return;
      }
      if (password !== passwordConfirm) {
        alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
        return;
      }
      if (password.length < 8) {
        alert('ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
        return;
      }

      // 3. ë°±ì—”ë“œë¡œ ë³´ë‚¼ JSON ë°ì´í„° ë§Œë“¤ê¸°
      const signupData = {
        username: username,
        password: password,
        email: email,
        birthdate: birthdate,
        phone: phone // â­ [ì¶”ê°€] ì „í™”ë²ˆí˜¸ ì „ì†¡
      };

      try {
        // 4. fetch APIë¡œ ë°±ì—”ë“œì— POST ìš”ì²­ ë³´ë‚´ê¸°
        const response = await fetch('/api/auth/signup', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(signupData)
        });

        // 5. ë°±ì—”ë“œ ì‘ë‹µ ì²˜ë¦¬
        const responseBody = await response.json();

        if (response.ok && responseBody.success) {
          alert(responseBody.username + 'ë‹˜, íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!\në¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
          window.location.href = 'login.html';
        } else {
          alert('íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + responseBody.message);
        }

      } catch (error) {
        console.error('íšŒì›ê°€ì… ìš”ì²­ ì‹¤íŒ¨:', error);
        alert('ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ë˜ëŠ” ì„œë²„ ì˜¤ë¥˜ì…ë‹ˆë‹¤. ì„œë²„ê°€ ì¼œì ¸ ìˆëŠ”ì§€ í™•ì¸í•´ ì£¼ì„¸ìš”.');
      }
    });
  </script>
</body>

</html>